# Doações
<table>
		<tr>
			<td> <!-- PagSeguro -->
				<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
				<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a><div align="center">PagSeguro</div></h3>
				<a href="https://pag.ae/bljJm47"><img src="https://stc.pagseguro.uol.com.br/public/img/botoes/doacoes/120x53-doar.gif"></a>
            </td>
			<td> <!-- PayPal -->
				<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
				<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a><div align="center">PayPal</div></h3>
				<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=7VVS675TLJHUL&lc=BR&item_name=Eracydes%20Lima%20Carvalho%20Junior&currency_code=BRL&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted"><img src="https://www.paypalobjects.com/pt_BR/BR/i/btn/btn_donateCC_LG.gif"></a>
			</td>
			<td> <!-- PicPay -->							
				<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
				<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a><div align="center">PicPay</div></h3>
				<a href="http://picpay.me/sansaoipb"><img src="https://lh3.googleusercontent.com/PX1pBd24_ygdLwvKMFrnUhJqGzG-YmhbYPkE8FM74qdXc-na7EqIA808F-7WAjZnvjziEESYZz2n8Ofn6WGdTrRufae_A7WbEVA5xASAUDpWNyqcVKE0GKNJrEVMBLCee5evEdrgJn8PgaI0E7qr0QDf6lTuCHI9osuziJwJ8-OTiR1JMOWLPLrw-wOW7IZ3DQCkyQECZpb_123x1K1fKNRw6cIyEWSgYRVwzX3PeljmxyH-EBOF-1wrO67-4rLP0CfbpRxJaX3pMyNlFZMLD0R6k6HvL1ax328z0qLafMwHjLPFlVEcyMkl-CFwJN9vgP37plpZ76NNruCBkj6W-MKQkvLevjcjf-Zq718N7ow8ZSlvUOCCZFJ1ieZZrLOINaMsmYGqMYpGEMME910zzAKtd-dm0IJ0TQTx_pZ0BXniK0HCvVhNHhPiYNYJGBMv_wlakLQ8XIcBdi0iIaEOFvrGSHhXEbDx6OZ9EKsvXQNoKBRwXD0Nnqxf3o-HW0U-P3pAskj3GSBa9qfvQqK-P4pxG98hYJ4st7_FA655I9n5bP-E6lIgFqvdJC8odyVfXFpHtVWfaO9_WVXowqdiXKzX9qQ9PetQNhTnJG_WgoqocmIh1FJhAYd08fonFfbmS_Hhnvi5qqxQytCqYxqWfh1elL18X8c=w120-h53-no"></a>
			</td>
		</tr>
</table>

<!--
<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>PayPal:</h3>

[![paypal](https://www.paypalobjects.com/pt_BR/BR/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=7VVS675TLJHUL&lc=BR&item_name=Eracydes%20Lima%20Carvalho%20Junior&currency_code=BRL&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted) 


<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>PagSeguro:</h3>

[![pagseguro](https://stc.pagseguro.uol.com.br/public/img/botoes/doacoes/120x53-doar.gif)](https://pag.ae/bljJm47)
-->

# Graphical Notifications Zabbix
Em caso de dúvida, sugestão ou dificuldade junte-se a nós no <b>Grupo do Telegram</b> <a href="https://t.me/joinchat/B7Jjiz-ttMgvu3zJKarK2w" class="wikilink2" title="Ingressar no Grupo" rel="nofollow">Gráfico no Email e Telegram</a>.

Envio de alarmes no ZABBIX pelo Telegram com usuário autenticado com gráficos.<br>

O "How to" foi testado no ZABBIX 3.0 ao 5.0 no Debian 8 ao 10, Ubuntu 14 ao 20 e CentOS 6.x ao 8, caso não utilize estas distros procure os pacotes descritos para sua necessidade.

<!--
# Acompanhe no Vídeo:
[![](https://img.youtube.com/vi/EBTh5cU_ZXM/0.jpg)](https://youtu.be/EBTh5cU_ZXM "Integração ZABBIX x Telegram com gráfico")
-->

# Sumário
<ul>
	<li>
		<strong>
			<a href=#requisitos>Requisitos</a>
		</strong>
	</li>
	<li>
		<strong>
			<a href=#criando-chave-api>Chave API</a>
		</strong>
	</li>
	<li>
		<strong>
			<a href=#edite-os-parâmetros>Parametros do script</a>
		</strong>
	</li>
	<li>
		<strong>
			<a href=#iniciando-configuração>Configuração de envio</a>
		</strong>
	</li>	
	<li>
		<strong>
			<a href=#configurando-o-envio>Configuração do front</a>
		</strong>
	</li>
	<li>
		<strong>
			<a href=#arquivo-de-configuração>Detalhes sobre o arquivo de configuração</a>
		</strong>
	</li>
	<li>
		<strong>
			<a href=#conclusão>Conclusão</a>
		</strong>
	</li>
		<li>
		<strong>
			<a href=#contribuições>Contribuições</a>
		</strong>
	</li>
</ul>

<br>

# Requisitos:
<!--
<b>0 – </b> Estar logado com o user zabbix
<br>
<blockquote>Caso necessário, habilite como o comando abaixo e troque a senha:</blockquote>
<pre>sudo usermod -s /bin/bash zabbix ; sudo passwd zabbix</pre>
-->
<b>0 – </b> Ter instalado Python 3.6 (ou superior)<br>
<b>1 – </b> Estar logado como root<br>
<b>2 – </b> Executar os seguintes comandos<br>

<blockquote> <p>Instale os pacotes </p> </blockquote>
<blockquote> <p> Debian/Ubuntu</p> </blockquote>
<pre>apt-get install -y wget dos2unix git sudo curl</pre>

<blockquote> <p>CentOS 6.x, 7 e 8</p> </blockquote>
<pre>yum install -y epel-release ; yum install -y wget dos2unix git sudo curl</pre>

<blockquote> <p>Faça o download do script de instalação</p> </blockquote>
<pre>cd /tmp ; wget https://raw.githubusercontent.com/sansaoipb/scripts/master/notificacoes.sh -O notificacoes.sh ; dos2unix notificacoes.sh ; sh notificacoes.sh</pre>

<b>OBS:</b><br>
Existe um local padrão onde fica os scripts, que tem 2 locais possiveis dependendo da forma de instalação do ZABBIX, compilando (<code>/usr/local/share/zabbix/alertscripts/</code>) ou por pacote (<code>/usr/lib/zabbix/alertscripts/</code>), respectivamente.<br>
Ao final da execução do script, ele indicará qual pasta você acessará.

# Criando Chave API:

Para iniciarmos, <a href="https://my.telegram.org/auth?to=apps" class="wikilink2" title="API Telegram" rel="nofollow"><b>CLIQUE AQUI</b></a> e 
faça o login usando sua conta para criar a <b>chave API do Telegram</b>:

Vamos precisar do <i><b>api_id</b></i> e <i><b>api_hash</b></i> no próximo passo

# Edite os parâmetros:

Para iniciarmos a configuração de envio, é preciso editar o arquivo de configuração e depois executar o script manualmente para efetivar o login, então entre no diretório <code>“que o script indicou”</code> e edite os campos abaixo contidos no arquivo <code>configScripts.properties</code>:

<b>OBS:</b><br>
<b>1 – </b>O usuário que você declarar no campo <i>“user”</i> precisa ter permissão no mínimo de leitura no ambiente.<br>
<b>2 – </b>Os campos contidos em [PathSectionEmail] e [PathSectionTelegram], são opcionais, logo se for usar somente telegram, não é necessario preencher a parte do email, assim como de forma inversa.<br>
<b>3 – </b>Se usar gmail, é preciso alterar o acesso à conta para aplicativos, se tiver "Verificação em duas etapas" ativado, é necessário criar uma "Senha de app", crie 
<a href="https://support.google.com/accounts/answer/185833" class="wikilink2" title="App MAIS seguros" rel="nofollow">Aqui</a>.<br>Caso não tenha verificação em duas etapas, pode somente ativar "Acesso a app menos seguros", altere 
<a href="https://support.google.com/accounts/answer/6010255?hl=pt-BR" class="wikilink2" title="App menos seguros" rel="nofollow">Aqui</a>.<br>

<blockquote>[PathSection]</blockquote>

<ul class="task-list">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“url” = 'http://127.0.0.1/zabbix' - URL de acesso ao FRONT com "http://" 
</font></font></li>

<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“user” = 'Admin'
</font></font></li>

<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“pass” = 'zabbix'
</font></font></li>
</ul>

<blockquote>[PathSectionEmail]</blockquote>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“smtp_server” = 'smtp.gmail.com:587'
</font></font></li>

<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“mail_user” = 'SeuEmail@gmail.com'
</font></font></li>

<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“mail_pass” = 'SuaSenha'
</font></font></li>
</ul>

<blockquote>[PathSectionTelegram]</blockquote>
<ul class="task-list">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“api.id” = '12345678'</font></font></li>

<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked="checked" disabled="disabled"><font><font class=""> 
“api.hash” = '12asdc64vfda19df165asdvf984dbf'</font></font></li>
</ul>

# Iniciando Configuração
Para iniciarmos a configuração de envio, é preciso logar pela primeira vez manualmente, então execute o <code>notificacoes-teste.py</code> com o comando abaixo:

<pre>sudo -u zabbix ./notificacoes-teste.py info</pre>

Será solicitado inserir o token do bot ou número de telefone da conta que será usada para envio, 
se optar por usar uma conta, use a seguinte estrutura de telefone 
<code>5522988776655</code> (prefixo para o Brasil, DDD e número), 
depois que der “Enter”, receberá um código por SMS e/ou no aplicativo 
<i>(no desktop, no celular ou na versão web, basta estar logado)</i>, 
adicione o codigo e estará pronto.

Ao final do processo, será listado todos os chats vinculados ao cadastro informado, 
para configurarmos o zabbix a enviar mensagens para usuários, grupos ou canais, 
é necessário sabermos o nome de usuário (do grupo ou canal) ou id, para obter, 
basta executar um dos comandos abaixo:<br>

<b>Script info ID, Nome ou user.</b><br>
Exs:<br>
<pre>sudo -u zabbix ./notificacoes-teste.py "info" "123456789"</pre>
ou
<pre>sudo -u zabbix ./notificacoes-teste.py "info" "Nome Sobrenome"</pre>
ou
<pre>sudo -u zabbix ./notificacoes-teste.py "info" "usuario"</pre>

pegue o “ID”, o “nome de cadastro” ou o "nome de registro" que aparecerá.

Para enviar a mensagem, é preciso usar o ID ou o nome, conforme as estruturas abaixo:<br>
<code>129131403</code><br>
<code>Sansão Simonton</code><br>
<code>sansaoipb</code><br>

<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>
Comando para teste
</h3>

Script para realização do teste:<br>
<b>Script, ID, Nome ou user.</b><br>
Exs:<br>
<pre>sudo -u zabbix ./notificacoes-teste.py "123456789"</pre>
ou
<pre>sudo -u zabbix ./notificacoes-teste.py "Nome Sobrenome"</pre>
ou
<pre>sudo -u zabbix ./notificacoes-teste.py "usuario"</pre>

<b>OBS:</b><br>
<b>1 – </b>"123456789", "Nome Sobrenome" ou "usuario" são informações fictícias para exemplificar, busque um UserID ou nome de usuário válido com os comandos <a href=#iniciando-configuração>supracitados</a> para realização do teste;<br>

<b>2 – </b> É necessario aumentar o tempo de timeout da aplicação, então no arquivo de configuração do server.<br>
(se não mudou o local padrão, estará aqui <code>/etc/zabbix/zabbix_server.conf</code> ou aqui <code>/usr/local/etc/zabbix_server.conf</code>)
vá até 0 paramemtro <code>\# Timeout=3</code> descomente e aumente para 30, ficando assim: 
<code>Timeout=30</code><br>
dessa forma fica garantido a entrega.

# Configurando o envio:

Com o script adicionado no local indicado acima, precisamos realizar algumas configurações no Front do ZABBIX, no <i>"Tipo de Mídia"</i>, (em Administração  > Tipo de Mídia) e a <i>"Ação"</i> (em Configuração  > Ações).

<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Tipo de Mídia</h3>

<!--
<blockquote> <p>Zabbix 2.4</p> </blockquote>
<img src="https://lh3.googleusercontent.com/FYnv-B4eOnSWPC3GkQLsqak610MnYqXDUBlZQE1qmSHkCXvTfddyNwPcMtnkaFBhU3zSstclZSj8b4WNag=w425-h107-rw"/><br><br>
-->

<blockquote> <p>Zabbix 3.0 (ou superior) </p> </blockquote>
<img src="https://lh3.googleusercontent.com/pw/ACtC-3fsUm053aTiLCqXzGeHD6nhvsKSdoOlYggUCYqk1UtOIiQM6G9ZQGZjt8vs0-AxDvued87CTrHusOnTBIG7oQZPeTuHYWZNN6TTM7zGMc_AZD-L9JrLVPhO11J-FZUFBStmPlPIo1jWs1zMmokXJmFnxA=w830-h346-no?authuser=0"/><br><br>


<b>OBS:</b><br>
Na versão 3.0, é obrigatório a utilização das macros <code>{ALERT.SENDTO}</code>, <code>{ALERT.SUBJECT}</code> e <code>{ALERT.MESSAGE}</code>, em caso de dúvidas, leia a Documentação 
<a href="https://www.zabbix.com/documentation/3.0/manual/config/notifications/media/script" class="wikilink2" title="Documentação Oficial" rel="nofollow">Aqui</a>.<br><br>

<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>
Configurando o usuário
</h3>

<img src="https://lh3.googleusercontent.com/pw/ACtC-3f4gkVPqGXBGFv6xV1f_8o5YrAt0fQtOPefBTNbVvo5Zej94QpzBqyjgEsE_Q1dz0OgEBKInUu8k_jMfJVG0Oty2XqRMvJcCPawCath-M23DtCYY5UlT9xVE5Ckgk2cpbgicODDY1GyvSIQGxkdWecbbA=w844-h479-no?authuser=0"/><br>

<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Criando a Ação:</h3>

A “<i>Mensagem Padrão</i>” na aba <b>“<u>Ação</u>”</b> existe somente com uma “exigência”, a primeira linha deve permanecer com as macros/variáveis abaixo ilustradas (<i>as macros/variáveis <b>entre as "#" </b></i>), podendo editar da segunda linha em diante. 
<br>
<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Imagem da Mensagem na Ação:</h3>

<img src="https://lh3.googleusercontent.com/pw/ACtC-3fxK4Ho3_t5sT98nHLkfy2rZM7pMEG9CrZrcJe967UXCmEKpswUsSJn66NhF94fc39lnukUPUfaP4joCtkZjaM0MTe_Y22DCqwIzx-kN34auXoGmDnlgalz4XG7gJW1HWl-GP4PFt6cK41TTPcLgIswxg=w744-h341-no?authuser=0"/><br><br>

<blockquote> Modelo Mensagem Padrão</blockquote>
<pre>{ITEM.NAME}#{EVENT.ID}#{ITEM.ID}#00C800#3600#
<b>IP/DNS:</b> {HOST.CONN}
<b>Último valor:</b> {ITEM.LASTVALUE}</pre>

<b>OBS:</b><br>logo se for usar
<i><b>”00C800”</b></i> é a cor da linha (verde) em Hex. sem tralha, e <i><b>”3600”</b></i> é o período do gráfico (1h) em segundo.
<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Resultado da linha de teste:</h3>

<img src="https://lh3.googleusercontent.com/pw/ACtC-3dnpvrFBPMxVFEP0SiTskBrvHZVvK9bCF2BPKXbrUIrCrCumQNpc-FUfCGjONlHeRzFl8pd-ddTOU7kmOEUm1S4-CocyvPKUUqF2QyIWv3-1thy-2JvaJJqa0lLX92mTPEAmqWYIT_rcW0dpDqrC6oaVg=w542-h311-no?authuser=0"/>
<br>
<br>

# Arquivo de configuração

<br>
<i>Por sugestão de "Everaldo Santos Cabral" 
(<a href="https://t.me/everaldoscabral" class="wikilink2" title="Conversar com ele" rel="nofollow">@everaldoscabral</a>)</i>

Vamos entender um pouco as funções configuráveis do arquivo de configuração <code>configScripts.properties</code>

<blockquote>[PathSection]</blockquote>
<ul>
	<li>
		ack - Ativa/Desativa o ack nos eventos
	</li>
	<li>
		salutation - Ativa/Desativa todas as saudações
	</li>
</ul>

<blockquote>[PathSectionEmail]</blockquote>
<ul>
    <li>
		salutation.email - Ativa/Desativa a saudação do email
	</li>
	<li>
		email_from - descreve o remetente.
	</li>
</ul>

<blockquote>[PathSectionTelegram]</blockquote>
<ul>
	<li>
		salutation.telegram - Ativa/Desativa a saudação do Telegram
	</li>
	<li>
		path.graph - caminho onde a imagem para o gráfico será salvo.
	</li>
</ul>


# Conclusão

<br>
1 – Este script é para agilizar a análise e ficar visualmente mais agradável 
o recebimento dos alarmes.<br><br>
2 – O script realiza uma consulta API mais ampla no zabbix, 
detecta automaticamente se o item é de caracter/log/texto, e não envia o gráfico "sem dados" 
somente o texto, ele dá "ack" no evento e informa quem foi notificado naquela ação, 
armazena log e faz a comunicação diretas entre APIs. <br><br>


# Contribuições
Gostaria de agradecer as mais de 400 pessoas que estão no "grupo dos projetos", que serve como ajuda/sugestão/contribuição
e aos que participam mais ativamente ajudando, sugerindo, pontuando, indicando melhorias e testando.

- A criação deste projeto unificado (email e telegram), foi depois de uma conversa e o de "Everaldo Santos Cabral" 
(<a href="https://t.me/everaldoscabral" class="wikilink2" title="Conversar com ele" rel="nofollow">@everaldoscabral</a>) 
dizer que a informação do arquivo de configuração era "inútil" pra quem usava somente um projeto, e isso me deu um luz para fazer algo diferente.

- Hoje os projetos tem tantas melhorias e aprimoramentos, muito graças ao "Abner Klug" 
(<a href="https://t.me/abnerk" class="wikilink2" title="Conversar com ele" rel="nofollow">@abnerk</a>), 
que sempre trouxe várias ideias, como colocar opção ao ack, a saudação, dentre outras...
Todos podem ajudar para fazermos uma comunidade mais forte e projetos cada vez melhores.

- Ao "Gabriel R F" 
(<a href="https://t.me/GabrielRF" class="wikilink2" title="Conversar com ele" rel="nofollow">@GabrielRF</a>) 
que me apresentou ao pyrogram, me abrindo o caminho a alteração na forma de envio, 
aprimorando e dando mais possibilidades para o projeto.

Obrigado a todos os envolvidos, tanto pela disponibilidade para fazer os teste, como pela ajuda, confiança e coparticipação nos projetos.  
<br><br><br><br>

<!--
<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Doações:</h3>

<blockquote> <p>PayPal / PagSeguro</p> </blockquote>

[![paypal](https://www.paypalobjects.com/pt_BR/BR/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=SANSAOIPB%40GMAIL%2eCOM&lc=BR&item_name=Sansao%20Projets&no_note=0&currency_code=BRL&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHostedGuest) [![pagseguro](https://stc.pagseguro.uol.com.br/public/img/botoes/doacoes/120x53-doar.gif)](https://pag.ae/bljJm47)

<blockquote> <p>PayPal</p> </blockquote>

[![paypal](https://www.paypalobjects.com/pt_BR/BR/i/btn/btn_donateCC_LG.gif)](https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=SANSAOIPB%40GMAIL%2eCOM&lc=BR&item_name=Sansao%20Projets&no_note=0&currency_code=BRL&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHostedGuest)

<blockquote> <p>PagSeguro</p> </blockquote>

[![pagseguro](https://stc.pagseguro.uol.com.br/public/img/botoes/doacoes/120x53-doar.gif)](https://pag.ae/bljJm47)
-->
